<!doctype html>
<html lang="en" class="h-full bg-gray-50">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Taiko Quest NATC Phoenix 2025 · Request Access</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="./config.js"></script>
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'
    const { SUPABASE_URL, SUPABASE_KEY } = window.__ENV || {}
    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY)
    window.submitReq = async (e) => {
      e.preventDefault()
      const email = e.target.email.value.trim()
      const first = e.target.first.value.trim()
      const last  = e.target.last.value.trim()
      if (!email || !first || !last) return alert('All fields required.')
      const { error } = await supabase.from('registrations').insert({ email, first_name:first, last_name:last })
      if (error) return alert('Error: '+error.message)
      e.target.reset()
      document.getElementById('msg').textContent = 'Thanks! We’ll email you after approval.'
    }
  </script>
</head>
<body class="h-full">
  <main class="max-w-md mx-auto p-6">
    <h1 class="text-2xl font-semibold mb-4">Request Access</h1>
    <form class="space-y-3" onsubmit="submitReq(event)">
      <div><label class="block text-sm">First name</label>
        <input name="first" class="w-full rounded-xl border p-2.5" /></div>
      <div><label class="block text-sm">Last name</label>
        <input name="last" class="w-full rounded-xl border p-2.5" /></div>
      <div><label class="block text-sm">Email</label>
        <input name="email" type="email" class="w-full rounded-xl border p-2.5" /></div>
      <button class="w-full rounded-xl bg-gray-900 text-white py-2.5">Submit</button>
    </form>
    <p id="msg" class="text-sm text-gray-600 mt-3"></p>
    <p class="text-sm mt-6">Already approved? <a href="./access.html" class="underline">Access my board</a></p>
  </main>
</body>
</html>
